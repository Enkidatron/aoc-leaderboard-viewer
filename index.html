<html>
<head>
    <meta charset="utf-8">
    <title>AoC private leaderboard viewer</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
  <script src="elm.js"></script>
  <script>
    var storageKey = 'aoc-leaderboard-snapshot';

    var time = +new Date();
    var storedSnapshot = localStorage.getItem(storageKey);
    var startingSnapshot = storedSnapshot ? JSON.parse(storedSnapshot) : null;

    var app = Elm.Main.fullscreen({
        currentTime: time,
        snapshot: startingSnapshot
    });

    app.ports.saveSnapshot.subscribe(function(snapshot){
        localStorage.setItem(storageKey, JSON.stringify(snapshot));
    });
  </script>
</body>
</html>
